<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POCOPAN - {% block title %}{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>

<div class="d-flex" id="wrapper">
    <div class="bg-light border-end" id="sidebar-wrapper">
        <div class="sidebar-heading p-3 text-white pocopan-bg-primary">POCOPAN - Administrador</div>
        <div class="list-group list-group-flush">
            <a class="list-group-item list-group-item-action p-3" href="{{ url_for('dashboard') }}"><i class="bi bi-speedometer2 me-2"></i>Dashboard</a>
            <a class="list-group-item list-group-item-action p-3" href="#"><i class="bi bi-people me-2"></i>Usuarios</a>
            <a class="list-group-item list-group-item-action p-3" href="#"><i class="bi bi-box-seam me-2"></i>Productos</a>
            <a class="list-group-item list-group-item-action p-3" href="#"><i class="bi bi-receipt me-2"></i>Ventas</a>
            <a class="list-group-item list-group-item-action p-3" href="{{ url_for('index') }}"><i class="bi bi-cart me-2"></i>Punto de Venta</a>
        </div>
    </div>
    
    <div id="page-content-wrapper">
        <nav class="navbar navbar-expand-lg border-bottom pocopan-bg-primary text-white">
            <div class="container-fluid">
                <button class="btn btn-outline-light" id="sidebarToggle"><i class="bi bi-list"></i></button>
                <div class="navbar-nav ms-auto">
                    <span class="nav-item nav-link text-white">{{ sistema.config['empresa'] }} Multi-Terminal</span>
                </div>
            </div>
        </nav>
        
        <div class="container-fluid p-4">
            {% block content %}{% endblock %}
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Script básico para colapsar/expandir el sidebar
    document.getElementById("sidebarToggle").onclick = function() {
        document.getElementById("wrapper").classList.toggle("toggled");
    };
</script>
        <!-- BUSCA EL FINAL DEL ARCHIVO base.html -->
<!-- ANTES del cierre </body> PEGA ESTO: -->

<div class="notification-container" id="notificationContainer"></div>

<script>
// PEGA ESTE CÓDIGO JAVASCRIPT JUSTO DESPUÉS

// Función para mostrar notificación de éxito
function showSuccess(message, title = 'Éxito') {
    showNotification(title, message, 'success');
}

// Función para mostrar notificación de error
function showError(message, title = 'Error') {
    showNotification(title, message, 'error');
}

// Función para mostrar notificación de advertencia
function showWarning(message, title = 'Advertencia') {
    showNotification(title, message, 'warning');
}

// Función para mostrar notificación informativa
function showInfo(message, title = 'Información') {
    showNotification(title, message, 'info');
}

// Función principal para mostrar notificaciones
function showNotification(title, message, type = 'info') {
    const container = document.getElementById('notificationContainer');
    
    // Si no existe el contenedor, crearlo
    if (!container) {
        const newContainer = document.createElement('div');
        newContainer.className = 'notification-container';
        newContainer.id = 'notificationContainer';
        document.body.appendChild(newContainer);
    }
    
    const actualContainer = document.getElementById('notificationContainer');
    
    // Crear elemento de notificación
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    
    // Icono según el tipo
    let icon = '✓';
    if (type === 'error') icon = '✕';
    if (type === 'warning') icon = '⚠';
    if (type === 'info') icon = 'ℹ';
    
    // Contenido de la notificación
    notification.innerHTML = `
        <div class="notification-icon">${icon}</div>
        <div class="notification-content">
            <div class="notification-title">${title}</div>
            <div class="notification-message">${message}</div>
            <div class="auto-close-bar">
                <div class="auto-close-progress" style="background: ${getProgressColor(type)}"></div>
            </div>
        </div>
    `;
    
    // Añadir al contenedor
    actualContainer.appendChild(notification);
    
    // Mostrar con animación
    setTimeout(() => {
        notification.classList.add('show');
    }, 10);
    
    // Ocultar después de 2 segundos
    setTimeout(() => {
        notification.classList.remove('show');
        notification.classList.add('hide');
        
        // Eliminar del DOM después de la animación
        setTimeout(() => {
            if (notification.parentNode) {
                actualContainer.removeChild(notification);
            }
        }, 400);
    }, 2000);
}

// Obtener color para la barra de progreso según el tipo
function getProgressColor(type) {
    switch(type) {
        case 'success': return '#A5D6A7';
        case 'error': return '#EF9A9A';
        case 'warning': return '#FFCC80';
        case 'info': return '#90CAF9';
        default: return '#FFFFFF';
    }
}
</script>
</body>
</html>